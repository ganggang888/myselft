$('.drag').draggable({ 
  appendTo: 'body',
  helper: 'clone'
});
function writeObj(obj){ 
    var description = ""; 
    for(var i in obj){   
        var property=obj[i];   
        description+=i+" = "+property+"\n";  
    }   
    alert(description); 
}
$(".col-sm-6 .drag.ui-draggable").click(function(){
	var ids = $(this).children("a").html();
	var add_time = $(this).children("#time"+ids).val();
	var term_name = $(".one"+ids).val();
	var title = $(this).children("#title"+ids).val();
	
	var text = '<div class="drop-item"><details><summary>'+ids+'&nbsp;&nbsp;【'+term_name+'】'+title+'&nbsp;&nbsp;</summary><div><label>创建时间：</label><input type="text" value="'+add_time+'" disabled=""></div></details><input type="hidden" name="test_id[]" value="'+ids+'"><button type="button" class="btn btn-default btn-xs remove"><span class="glyphicon glyphicon-trash"></span></button></div>';
	if ($("#dropzone .drop-item").html()) {
		$($("#dropzone .drop-item").last()).after(text);
	} else {
		$("#dropzone").append(text);
	}
	deleteSelf();
	//alert(add_time);
	//alert(ids);
	//alert($(this).html());
})
function deleteSelf()
{
	$(".btn.btn-default.btn-xs").click(function(){
		$(this).parent().remove();
	})
}
$('#dropzone').droppable({
  activeClass: 'active',
  hoverClass: 'hover',
  accept: ":not(.ui-sortable-helper)", // Reject clones generated by sortable
  drop: function (e, ui) {
	  var ls = ui.draggable.text();
	  var one = $(".one"+ls).val();
	  var two = $(".two"+ls).val();
	  var title = $("#title"+ls).val();
	  var times = $("#time"+ls).val();
    var $el = $('<div class="drop-item"><details><summary>' + ui.draggable.text() +'&nbsp;&nbsp;【'+one+'】'+title+'&nbsp;&nbsp;</summary><div><label>创建时间：</label><input type="text" value="'+times+'" disabled /></div></details><input type="hidden" name="test_id[]" value="'+ls+'"></div>');
    $el.append($('<button type="button" class="btn btn-default btn-xs remove"><span class="glyphicon glyphicon-trash"></span></button>').click(function () { $(this).parent().detach(); }));
    $(this).append($el);
  }
}).sortable({
  items: '.drop-item',
  sort: function() {
    // gets added unintentionally by droppable interacting with sortable
    // using connectWithSortable fixes this, but doesn't allow you to customize active/hoverClass options
    $( this ).removeClass( "active" );
  }
});

